{"remainingRequest":"/home/fatminmin/Documents/leetcode-ranking-search/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/fatminmin/Documents/leetcode-ranking-search/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/fatminmin/Documents/leetcode-ranking-search/src/App.vue","mtime":1628668714130},{"path":"/home/fatminmin/Documents/leetcode-ranking-search/node_modules/cache-loader/dist/cjs.js","mtime":1628668707402},{"path":"/home/fatminmin/Documents/leetcode-ranking-search/node_modules/babel-loader/lib/index.js","mtime":1628668707246},{"path":"/home/fatminmin/Documents/leetcode-ranking-search/node_modules/cache-loader/dist/cjs.js","mtime":1628668707402},{"path":"/home/fatminmin/Documents/leetcode-ranking-search/node_modules/vue-loader/lib/index.js","mtime":1628668711418}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnCmltcG9ydCBVc2VyUmFua2luZ1dvcmtlciBmcm9tICcuL3NjcmlwdHMvZ2V0X3VzZXJfcmFua193b3JrZXInCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcCcsCiAgY29tcG9uZW50czogewogICAgLy8gSGVsbG9Xb3JsZAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBlclBhZ2U6IDE1LAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgY29udGVzdHM6IFtdLAogICAgICBmaWVsZHM6IFsidGl0bGUiLCAic3RhcnRUaW1lIl0sCiAgICAgIGZpbHRlckNvbnRlc3Q6ICIiLAogICAgICBmaWx0ZXJlZE9uOiBbInRpdGxlIl0sCiAgICAgIGlzQnVzeTogdHJ1ZSwKICAgICAgdG90YWxSb3dzOiBudWxsLAogICAgICAvLyB1c2VyIGNvbnRlc3QgaGlzdG9yeQogICAgICBmaWx0ZXJVc2VyOiAiIiwKICAgICAgdXNlckNvbnRlc3RIaXN0b3J5RmllbGRzOiBbewogICAgICAgIGtleTogImNvbnRlc3QiLAogICAgICB9LCB7CiAgICAgICAga2V5OiAicmFuayIsCiAgICAgICAgLy8gbGFiZWw6ICJSYW5rIChQZXJjZW50aWxlKSIsCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJwZXJjZW50aWxlIgogICAgICB9LCB7CiAgICAgICAga2V5OiAicGFydGljaXBhbnRzIgogICAgICB9XSwKICAgICAgcmV0cmlldmVkQ250OiAwLAogICAgICB1c2VyQ29udGVzdEhpc3Rvcnk6IFtdLAogICAgICB1c2VyQ29udGVzdEJ1c3k6IGZhbHNlLAogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRvdGFsOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMudG90YWxSb3dzIHx8IHRoaXMuY29udGVzdHMubGVuZ3RoOwogICAgfSwKICAgIHRvdGFsQ29udGVzdHM6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5jb250ZXN0cy5sZW5ndGg7CiAgICB9LAogICAgdXNlckNvbnRlc3RIaXN0b3J5VGl0bGU6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5maWx0ZXJVc2VyICsgIidzIENvbnRlc3QgSGlzdG9yeSI7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbigpIHsKICAgIHRoaXMuY29udGVzdHMgPSBbewogICAgICAidGl0bGUiOiAiR2xvYmFsIFJhbmtpbmciLAogICAgICAiaHJlZiI6ICJnbG9iYWxfcmFua2luZy5odG1sIiwKICAgICAgInN0YXJ0VGltZSI6IDAsCiAgICB9XTsKICAgIGF4aW9zLmdldCgnZGF0YS9jb250ZXN0cy5qc29uJykKICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcCkgewogICAgICAgIHRoaXMuY29udGVzdHMgPSB0aGlzLmNvbnRlc3RzLmNvbmNhdChyZXNwLmRhdGEpOwogICAgICAgIHRoaXMuaXNCdXN5ID0gZmFsc2U7CiAgICAgIH0uYmluZCh0aGlzKSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB0aW1lc3RhbXBUb0RhdGU6IGZ1bmN0aW9uKHRpbWVzdGFtcCkgewogICAgICByZXR1cm4gbW9tZW50LnVuaXgodGltZXN0YW1wKS5mb3JtYXQoJ1lZWVktTU0tREQgaGg6bW06c3MnKTsKICAgIH0sCiAgICBvbkZpbHRlcmVkOiBmdW5jdGlvbihmaWx0ZXJlZEl0ZW1zKSB7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSAxOwogICAgICB0aGlzLnRvdGFsUm93cyA9IGZpbHRlcmVkSXRlbXMubGVuZ3RoOwogICAgfSwKICAgIHNlYXJjaFVzZXJIaXN0b3J5OiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy51c2VyQ29udGVzdEhpc3RvcnkgPSBbXTsKICAgICAgdGhpcy51c2VyQ29udGVzdEJ1c3kgPSB0cnVlOwogICAgICB0aGlzLiRyZWZzWyd1c2VyLWhpc3RvcnktbW9kYWwnXS50b2dnbGUoJ3VzZXItaGlzdG9yeS1zdWJtaXQnKTsKICAgICAgdmFyIHdvcmtlciA9IG5ldyBVc2VyUmFua2luZ1dvcmtlcjsKICAgICAgdGhpcy5yZXRyaWV2ZWRDbnQgPSAwOwogICAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24oZSkgewogICAgICAgIGlmKGUuZGF0YS5jb250ZXN0KSB7CiAgICAgICAgICB0aGlzLnVzZXJDb250ZXN0SGlzdG9yeS5wdXNoKGUuZGF0YSk7CiAgICAgICAgfQogICAgICAgIHRoaXMucmV0cmlldmVkQ250Kys7CiAgICAgICAgaWYgKHRoaXMucmV0cmlldmVkQ250ID09IHRoaXMuY29udGVzdHMubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLnVzZXJDb250ZXN0QnVzeSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfS5iaW5kKHRoaXMpOwogICAgICBmb3IgKGxldCBjb250ZXN0IG9mIHRoaXMuY29udGVzdHMpIHsKICAgICAgICBpZiAoY29udGVzdC50aXRsZSA9PT0gIkdsb2JhbCBSYW5raW5nIikgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQogICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZShbdGhpcy5maWx0ZXJVc2VyLCBjb250ZXN0LnRpdGxlLCBjb250ZXN0LnN0YXJ0VGltZV0pOwogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\" class=\"px-5 py-3\">\n    <b-navbar toggleable=\"lg\" type=\"dark\" variant=\"info\" class=\"mb-2\">\n      <b-navbar-brand href=\"#\">Leetcode contest ranking searcher</b-navbar-brand>\n    </b-navbar>\n    <a class=\"github-button\" href=\"https://github.com/chiehmin\" data-size=\"large\" data-show-count=\"true\" aria-label=\"Follow @chiehmin on GitHub\">Follow @chiehmin</a>\n    <a class=\"github-button\" href=\"https://github.com/chiehmin/leetcode-ranking-search\" data-icon=\"octicon-star\" data-size=\"large\" data-show-count=\"true\" aria-label=\"Star chiehmin/leetcode-ranking-search on GitHub\">Star</a>\n\n    <b-container fluid class=\"p-0\">\n      <b-row align-h=\"between\">\n        <b-col sm=\"5\">\n          <b-pagination v-model=\"currentPage\" :total-rows=\"total\" :per-page=\"perPage\" aria-controls=\"contest-table\" ></b-pagination>\n        </b-col>\n        <b-col sm=\"3\">\n          <b-form-input v-model=\"filterContest\" type=\"search\" placeholder=\"Search a contest...\"></b-form-input>\n        </b-col>\n        <b-col sm=\"4\">\n          <b-input-group>\n            <b-form-input\n              v-model=\"filterUser\"\n              type=\"search\"\n              placeholder=\"Search user contest history...\"\n              @keydown.enter.native=\"searchUserHistory\"\n            ></b-form-input>\n            <b-input-group-append>\n              <b-button id=\"user-history-submit\" type=\"submit\" variant=\"primary\" v-on:click=\"searchUserHistory\">Submit</b-button>\n            </b-input-group-append>\n          </b-input-group>\n        </b-col>\n      </b-row>\n    </b-container>\n\n    <b-table hover id=\"contest-table\"\n      :items=\"contests\"\n      :fields=\"fields\"\n      :per-page=\"perPage\"\n      :current-page=\"currentPage\"\n      :filter=\"filterContest\"\n      :filter-included-fields=\"filteredOn\"\n      @filtered=\"onFiltered\"\n      :busy=\"isBusy\">\n      <template v-slot:head(title)=\"\">\n        Contest\n      </template>\n      <template v-slot:cell(title)=\"data\">\n        <b-link :href=\"data.item.href\">{{ data.item.title }}</b-link>\n      </template>\n      <template v-slot:cell(startTime)=\"data\">\n        {{ timestampToDate(data.item.startTime) }}\n      </template>\n    </b-table>\n\n    <b-modal ref=\"user-history-modal\" no-close-on-backdrop :hide-footer=\"true\" :title=\"userContestHistoryTitle\">\n      <b-table hover\n        :items=\"userContestHistory\"\n        :fields=\"userContestHistoryFields\"\n        :busy=\"userContestBusy\"\n        sort-by=\"startTime\"\n        :sort-desc=\"true\"\n        show-empty\n        empty-text=\"no contest data found.\">\n        <template v-slot:table-busy>\n          <div class=\"text-center text-danger my-2\">\n            <b-spinner class=\"align-middle\"></b-spinner>\n            <strong>Loading {{ retrievedCnt }} / {{ totalContests }}...</strong>\n          </div>\n        </template>\n      </b-table>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport moment from 'moment'\nimport UserRankingWorker from './scripts/get_user_rank_worker'\n\nexport default {\n  name: 'App',\n  components: {\n    // HelloWorld\n  },\n  data() {\n    return {\n      perPage: 15,\n      currentPage: 1,\n      contests: [],\n      fields: [\"title\", \"startTime\"],\n      filterContest: \"\",\n      filteredOn: [\"title\"],\n      isBusy: true,\n      totalRows: null,\n      // user contest history\n      filterUser: \"\",\n      userContestHistoryFields: [{\n        key: \"contest\",\n      }, {\n        key: \"rank\",\n        // label: \"Rank (Percentile)\",\n      }, {\n        key: \"percentile\"\n      }, {\n        key: \"participants\"\n      }],\n      retrievedCnt: 0,\n      userContestHistory: [],\n      userContestBusy: false,\n    }\n  },\n  computed: {\n    total: function() {\n      return this.totalRows || this.contests.length;\n    },\n    totalContests: function() {\n      return this.contests.length;\n    },\n    userContestHistoryTitle: function() {\n      return this.filterUser + \"'s Contest History\";\n    }\n  },\n  mounted: function() {\n    this.contests = [{\n      \"title\": \"Global Ranking\",\n      \"href\": \"global_ranking.html\",\n      \"startTime\": 0,\n    }];\n    axios.get('data/contests.json')\n      .then(function(resp) {\n        this.contests = this.contests.concat(resp.data);\n        this.isBusy = false;\n      }.bind(this));\n  },\n  methods: {\n    timestampToDate: function(timestamp) {\n      return moment.unix(timestamp).format('YYYY-MM-DD hh:mm:ss');\n    },\n    onFiltered: function(filteredItems) {\n      this.currentPage = 1;\n      this.totalRows = filteredItems.length;\n    },\n    searchUserHistory: function() {\n      this.userContestHistory = [];\n      this.userContestBusy = true;\n      this.$refs['user-history-modal'].toggle('user-history-submit');\n      var worker = new UserRankingWorker;\n      this.retrievedCnt = 0;\n      worker.onmessage = function(e) {\n        if(e.data.contest) {\n          this.userContestHistory.push(e.data);\n        }\n        this.retrievedCnt++;\n        if (this.retrievedCnt == this.contests.length) {\n          this.userContestBusy = false;\n        }\n      }.bind(this);\n      for (let contest of this.contests) {\n        if (contest.title === \"Global Ranking\") {\n          continue;\n        }\n        worker.postMessage([this.filterUser, contest.title, contest.startTime]);\n      }\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n"]}]}